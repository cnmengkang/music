<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    124
    <script>

        // 模拟服务器拿到的歌词数据
        const lyricString = "[00:00.000] 作词 : G.E.M.邓紫棋\n[00:01.000] 作曲 : G.E.M.邓紫棋\n[00:02.000] 编曲 : Lupo Groinig\n[00:03.000] 制作人 : Lupo Groinig\n[00:05.117]编曲 : Lupo Groinig\n[00:08.726]\n[00:12.512]感受停在我发端的指尖\n[00:16.573]如何瞬间冻结时间\n[00:23.365]记住望着我坚定的双眼\n[00:27.308]也许已经没有明天\n[00:32.993]\n[00:33.597]面对浩瀚的星海\n[00:36.394]我们微小得像尘埃\n[00:38.906]漂浮在一片无奈\n[00:43.288]\n[00:44.684]缘分让我们相遇乱世以外\n[00:50.126]命运却要我们危难中相爱\n[00:55.544]也许未来遥远在光年之外\n[01:00.989]我愿守候未知里\n[01:03.643]为你等待\n[01:04.657]\n[01:05.109]我没想到\n[01:06.396]为了你我能疯狂到\n[01:10.571]山崩海啸\n[01:11.786]没有你根本不想逃\n[01:15.411]\n[01:16.058]我的大脑\n[01:17.327]为了你已经疯狂到\n[01:21.477]脉搏心跳\n[01:22.718]没有你根本不重要\n[01:27.289]\n[01:28.891]一双围在我胸口的臂弯\n[01:32.768]足够抵挡 天旋地转\n[01:39.600]一种执迷不放手的倔强\n[01:43.655]足以点燃 所有希望\n[01:49.561]\n[01:50.029]宇宙磅礴而冷漠\n[01:52.707]我们的爱微小却闪烁\n[01:55.211]颠簸却如此忘我\n[02:00.241]\n[02:00.943]缘分让我们相遇乱世以外\n[02:06.422]命运却要我们危难中相爱\n[02:11.867]也许未来遥远在光年之外\n[02:17.382]我愿守候未知里\n[02:19.991]为你等待\n[02:21.044]\n[02:21.492]我没想到\n[02:22.766]为了你我能疯狂到\n[02:26.921]山崩海啸\n[02:28.180]没有你根本不想逃\n[02:31.915]\n[02:32.428]我的大脑\n[02:33.668]为了你已经疯狂到\n[02:37.788]脉搏心跳\n[02:39.124]没有你根本不重要\n[02:43.023]\n[02:44.121]也许航道以外\n[02:49.628]是醒不来的梦\n[02:56.440]乱世以外\n[03:00.256]是纯粹的相拥\n[03:04.872]\n[03:05.035]我没想到\n[03:06.538]为了你我能疯狂到\n[03:10.532]山崩海啸\n[03:11.871]没有你根本不想逃\n[03:15.841]\n[03:16.155]我的大脑\n[03:17.343]为了你已经疯狂到\n[03:21.483]脉搏心跳\n[03:22.687]没有你根本不重要\n[03:26.232]\n[03:26.944]相遇乱世以外\n[03:32.344]危难中相爱\n[03:37.796]相遇乱世以外\n[03:43.303]危难中相爱\n[03:48.756]我没想到\n[03:50.737]\n[03:54.371]监制 : Lupo Groinig\n"

        // =============================================
        function formLyric(arr) {
            if (arr === '') return;
            const line = arr.split('\n');
            const lyricsObjArr = []
            const regTime = /\[\d{2}:\d{2}.\d{2,3}\]/
            line.forEach(arr => {
                if (arr === '') return
                const obj = {}
                const time = arr.match(regTime)
                obj.time = time ? this.formatLyricTime(time[0].slice(1, time[0].length - 1)) : 0
                obj.lyric = arr.split(']')[1].trim() === '' ? '' : arr.split(']')[1].trim()
                if (obj.lyric === '') {
                    console.log('这一行没有歌词')
                } else {
                    lyricsObjArr.push(obj)
                }
            })
            return lyricsObjArr;
        }
        console.log(formLyric(lyricString))
        function formatLyricTime(time) {
            const regMin = /.*:/
            const regSec = /:.*\./
            const regMs = /\./

            const min = parseInt(time.match(regMin)[0].slice(0, 2))
            let sec = parseInt(time.match(regSec)[0].slice(1, 3))
            const ms = time.slice(time.match(regMs).index + 1, time.match(regMs).index + 3)
            if (min !== 0) {
                sec += parseInt(min * 60);
            }
            let dec = sec + '.' + ms;
            let aa = parseInt(dec * 100) / 100;
            console.log(aa)
            return aa
        }

    </script>
</body>

</html>