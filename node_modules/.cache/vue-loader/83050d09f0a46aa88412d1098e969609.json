{"remainingRequest":"E:\\study\\home_music\\music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\study\\home_music\\music\\src\\views\\discover\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\study\\home_music\\music\\src\\views\\discover\\detail.vue","mtime":1672750156478},{"path":"E:\\study\\home_music\\music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1672410504051},{"path":"E:\\study\\home_music\\music\\node_modules\\vue-loader\\lib\\index.js","mtime":1672410506311}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBkZXRhaWwsIHBsYXlUcmFjaywgY29tbWVudFBsYXlMaXN0LCBzdWJzY3JpYmVycyB9IGZyb20gJ0AvYXBpL2Rpc2NvdmVyL2RldGFpbCc7DQppbXBvcnQgc29uZ0hlYWQgZnJvbSAnQC9jb21wb25lbnRzL2JvZHkvaGVhZCcNCmltcG9ydCBzb25nTGlzdCBmcm9tICdAL2NvbXBvbmVudHMvYm9keS9zb25nbGlzdCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBjb21wb25lbnRzOiB7IHNvbmdIZWFkLCBzb25nTGlzdCB9LA0KICAgIG5hbWU6ICdkZXRhaWwnLA0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBwbGF5bGlzdDoge30sDQogICAgICAgICAgICBwbGF5QWxsOiB7DQogICAgICAgICAgICAgICAgaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwNCiAgICAgICAgICAgICAgICBsaW1pdDogMzAsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgYWN0aXZlTmFtZTogJ3NvbmcnLA0KICAgICAgICAgICAgbGlzdDogW10sDQogICAgICAgICAgICBjb21tZW50OiAiIiwNCiAgICAgICAgICAgIHN1YnNjcmliZXJzOiAiIiwNCiAgICAgICAgICAgIHRvdGFsOiAnJw0KICAgICAgICB9DQogICAgfSwNCiAgICBtb3VudGVkKCkgew0KICAgICAgICBjb25zdCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtczsNCiAgICAgICAgdGhpcy5nZXREZXRhaWwoaWQpDQogICAgICAgIHRoaXMuZ2V0UGxheVRyYWNrKCkNCiAgICAgICAgdGhpcy5nZXRDb21tZW50KCkNCiAgICB9LA0KICAgIGNyZWF0ZWQoKSB7DQoNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgLy8g6I635Y+W6K+m5oOF6aG16aG26YOo5pWw5o2uDQogICAgICAgIGdldERldGFpbChpZCkgew0KICAgICAgICAgICAgZGV0YWlsKGlkKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncGxheWxpc3QnLCByZXMucGxheWxpc3QpDQogICAgICAgICAgICAgICAgdGhpcy5wbGF5bGlzdCA9IHJlcy5wbGF5bGlzdDsNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8vIOiOt+WPluatjOWNleaJgOacieatjOabsg0KICAgICAgICBnZXRQbGF5VHJhY2soKSB7DQogICAgICAgICAgICBwbGF5VHJhY2sodGhpcy5wbGF5QWxsKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc29uZ3NMaXN0JywgcmVzKQ0KICAgICAgICAgICAgICAgIHRoaXMubGlzdCA9IHJlcy5zb25ncw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgLy8g5Y2V6YCJDQogICAgICAgIC8vIHRhYuWIh+aNog0KICAgICAgICBoYW5kbGVDbGljayh0YWIpIHsNCiAgICAgICAgICAgIGlmICh0YWIuaW5kZXggPT0gMSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29tbWVudCgpDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRhYi5pbmRleCA9PSAyKSB7DQogICAgICAgICAgICAgICAgdGhpcy5nZXRTdWJzY3JpYmVycygpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vIOiOt+WPluatjOWNleivhOiuug0KICAgICAgICBnZXRDb21tZW50KCkgew0KICAgICAgICAgICAgY29tbWVudFBsYXlMaXN0KHRoaXMucGxheUFsbCkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jldmlld3MnLCByZXMpDQogICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy50b3RhbA0KICAgICAgICAgICAgICAgIHRoaXMuY29tbWVudCA9IHJlcy5jb21tZW50cw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgLy8g5q2M5Y2V5pS26JeP6ICFDQogICAgICAgIGdldFN1YnNjcmliZXJzKCkgew0KICAgICAgICAgICAgc3Vic2NyaWJlcnModGhpcy5wbGF5QWxsKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuc3Vic2NyaWJlcnMpDQogICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVycyA9IHJlcy5zdWJzY3JpYmVycw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICB9DQp9DQo="},{"version":3,"sources":["detail.vue"],"names":[],"mappings":";AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"src/views/discover","sourcesContent":["<template>\r\n    <div class=\"detail mt-20\">\r\n        <div class=\"detail-header\">\r\n            <song-head :tableHead=\"playlist\"></song-head>\r\n            <!-- 详情页顶部 -->\r\n        </div>\r\n        <div class=\"detail-body\">\r\n            <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n                <el-tab-pane label=\"歌曲列表\" name=\"song\">\r\n                    <song-list :tableDate=\"list\"></song-list>\r\n                </el-tab-pane>\r\n                <el-tab-pane name=\"reviews\">\r\n                    <span slot=\"label\">评论({{ total }})</span>\r\n                    <div class=\"comment\" v-for=\"(item, index) in comment\" :key=\"index\">\r\n                        <div class=\"user-avatarUrl\">\r\n                            <el-avatar :size=\"40\" :src=\"item.user.avatarUrl\"></el-avatar>\r\n                        </div>\r\n                        <div class=\"user-info\">\r\n                            <span class=\"blue mb-5 inline-b\">{{ item.user.nickname }}<span class=\"vip ml-5\"\r\n                                    v-if=\"item.user.vipType != 0\">VIP{{ item.user.vipRights.redVipLevel\r\n}}</span>：</span>\r\n                            <span>{{ item.content }}</span>\r\n                            <div class=\"reviews-2\" v-for=\"(items, index) in item.beReplied\" :key=\"index\">\r\n                                <a class=\"blue font-12\">@{{ items.user.nickname }}:</a>\r\n                                <span>{{ items.content }}</span>\r\n                            </div>\r\n                            <div class=\"font-12 mt-5\">{{ item.timeStr }}</div>\r\n                        </div>\r\n                    </div>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"收藏者\" name=\"third\">\r\n                    <div class=\"scribers\">\r\n                        <div class=\"subscribers\" v-for=\"(item, index) in subscribers\" :key=\"index\">\r\n                            <div class=\"user-avatarUrl\">\r\n                                <el-avatar :size=\"90\" :src=\"item.avatarUrl\"></el-avatar>\r\n                            </div>\r\n                            <div class=\"user-info\">\r\n                                <span class=\"nickName\"> {{ item.nickname }}</span>\r\n                                <span style=\"color:red\" v-if=\"item.gender != 0\">{{ item.gender == 1 ? '男' : '女'\r\n                                    }}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </el-tab-pane>\r\n            </el-tabs>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { detail, playTrack, commentPlayList, subscribers } from '@/api/discover/detail';\r\nimport songHead from '@/components/body/head'\r\nimport songList from '@/components/body/songlist'\r\nexport default {\r\n    components: { songHead, songList },\r\n    name: 'detail',\r\n    data() {\r\n        return {\r\n            playlist: {},\r\n            playAll: {\r\n                id: this.$route.params.id,\r\n                limit: 30,\r\n            },\r\n            activeName: 'song',\r\n            list: [],\r\n            comment: \"\",\r\n            subscribers: \"\",\r\n            total: ''\r\n        }\r\n    },\r\n    mounted() {\r\n        const id = this.$route.params;\r\n        this.getDetail(id)\r\n        this.getPlayTrack()\r\n        this.getComment()\r\n    },\r\n    created() {\r\n\r\n    },\r\n    methods: {\r\n        // 获取详情页顶部数据\r\n        getDetail(id) {\r\n            detail(id).then((res) => {\r\n                console.log('playlist', res.playlist)\r\n                this.playlist = res.playlist;\r\n            })\r\n        },\r\n        // 获取歌单所有歌曲\r\n        getPlayTrack() {\r\n            playTrack(this.playAll).then((res) => {\r\n                console.log('songsList', res)\r\n                this.list = res.songs\r\n            })\r\n        },\r\n        // 单选\r\n        // tab切换\r\n        handleClick(tab) {\r\n            if (tab.index == 1) {\r\n                this.getComment()\r\n            } else if (tab.index == 2) {\r\n                this.getSubscribers()\r\n            }\r\n        },\r\n        // 获取歌单评论\r\n        getComment() {\r\n            commentPlayList(this.playAll).then((res) => {\r\n                console.log('reviews', res)\r\n                this.total = res.total\r\n                this.comment = res.comments\r\n            })\r\n        },\r\n        // 歌单收藏者\r\n        getSubscribers() {\r\n            subscribers(this.playAll).then((res) => {\r\n                console.log(res.subscribers)\r\n                this.subscribers = res.subscribers\r\n            })\r\n        },\r\n    }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.detail {\r\n\r\n    // 内容区域\r\n    .detail-body {\r\n        .comment {\r\n            display: flex;\r\n            border-bottom: 1px solid #eee;\r\n            padding: 15px 0px;\r\n\r\n            .user-info {\r\n                text-align: left;\r\n                margin-left: 10px;\r\n                width: calc(100% - 40px);\r\n\r\n                span {\r\n                    font-size: 12px;\r\n                }\r\n\r\n\r\n\r\n                .reviews-2 {\r\n                    background: #f2f2f2;\r\n                    padding: 8px 10px;\r\n                    border-radius: 5px;\r\n                }\r\n\r\n                .vip {\r\n                    color: red;\r\n                }\r\n            }\r\n\r\n            .user-avatarUrl {\r\n                width: 40px;\r\n                height: 40px;\r\n                border-radius: 50%;\r\n\r\n\r\n            }\r\n        }\r\n\r\n        .scribers {\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            gap: 20px 0px;\r\n\r\n            .subscribers {\r\n                display: flex;\r\n                align-items: center;\r\n                width: 50%;\r\n                gap: 0px 10px;\r\n\r\n                .user-avatarUrl {\r\n                    width: 95px;\r\n                    height: 95px;\r\n                    border-radius: 50%;\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n}\r\n</style>"]}]}